{% assign classes = include.classes | default: 'checklist-card' %}
{%- comment -%}
  Unified card include (single canonical template).
  Supports:
    - include.href => rendered as <a> (link card)
    - include.disabled => non-interactive state
    - include.content => hidden modal content (used by JS)
    - include.classes, include.icon, include.title, include.desc, include.meta
    - renders a touch-friendly quick-action button (.card-action) for coarse-pointer devices
{%- endcomment -%}

{%- capture _card_inner -%}
  {% if include.icon %}<div class="card-icon">{{ include.icon }}</div>{% endif %}
  <h3 class="card-title">{{ include.title }}</h3>
  {% if include.desc %}<p class="card-desc">{{ include.desc }}</p>{% endif %}
  {% if include.meta %}<div class="card-meta">{{ include.meta }}</div>{% endif %}
  {%- if include.content -%}
    <div class="card-modal-content" hidden>
      {{ include.content }}
    </div>
  {%- endif -%}
  <!-- Touch quick-action button: icon only + screen-reader label (no visible 'Open' text) -->
  <button type="button" class="card-action" aria-label="Open details">
    <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true" focusable="false" class="card-action-icon">
      <path fill="currentColor" d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm1 14h-2v-2h2v2zm0-4h-2V6h2v6z"/>
    </svg>
    <span class="sr-only">Open details</span>
  </button>
{%- endcapture -%}

{%- if include.disabled -%}
  <div class="{{ classes }} is-disabled" aria-disabled="true">
    {{ _card_inner }}
  </div>

{%- elsif include.href -%}
  <a href="{{ include.href }}" class="{{ classes }}" data-href="{{ include.href }}">
    {{ _card_inner }}
  </a>

{%- else -%}
  <div class="{{ classes }}">
    {{ _card_inner }}
  </div>
{%- endif -%}
